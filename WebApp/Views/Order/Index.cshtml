@model CheckoutVm
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@{
    var culture = CultureInfo.CurrentCulture.Name;
    var baseApi = _config["BaseApi"];
}
<hr class="mt-5">
<!-- container -->
<div class="container-fluid px-3 mt-5">

    <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
        <ol class="breadcrumb border mt-3">
            <li class="breadcrumb-item"><a asp-controller="Home" asp-action="Index">Trang chủ</a></li>
            <li class="breadcrumb-item active" aria-current="page">Sản phẩm</li>
            <li class="breadcrumb-item" aria-current="page">Thanh toán</li>
        </ol>
    </nav>

    <a class="nav-link h2 text-muted p-0" href="#">
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-cash-coin" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0z" />
            <path d="M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1h-.003zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195l.054.012z" />
            <path d="M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083c.058-.344.145-.678.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1H1z" />
            <path d="M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 5.982 5.982 0 0 1 3.13-1.567z" />
        </svg>
        Thanh toán
    </a>
    <hr class="m-0" width="20%">

    @if (TempData["alert"] != null)
    {
        <span class="alert alert-success">@TempData["alert"]</span>
    }
    else
    {
        <div class="row no-gutters">
            <div class="col-md-8">
                <div class="product-details me-2">
                    <a href="/@culture/Cart/Index" class="d-flex flex-row align-items-center nav-link text-muted">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"></path>
                        </svg>
                        <span class="mx-3">Chỉnh sửa giỏ hàng</span>
                        <span class="text-capitalize text-success"> Hiện đang có @Model.Carts.Count sản phẩm - Tổng số lượng @Model.Carts.Sum(a => a.Quantity)</span>
                    </a>
                    <hr>

                    @{
                        foreach (var item in Model.Carts)
                        {
                            <div class="d-flex justify-content-between align-items-center mt-3 p-2 items rounded">

                                <div class="d-flex flex-row">
                                    <img class="rounded" src="@baseApi/@item.Img" width="40">
                                    <div class="ms-2"><span class="font-weight-bold d-block">@item.Name</span><span class="spec">@item.Description</span></div>
                                </div>

                                <div class="d-flex flex-row align-items-center">
                                    <span class="me-3">Số lượng</span>
                                    <span class="d-block text-danger">@item.Quantity</span>
                                    <span class="d-block ms-5 font-weight-bold">@item.Price.ToString("N0") VNĐ</span>
                                </div>
                            </div>
                        }
                    }

                </div>
            </div>
            <div class="col-md-4">
                <div class="payment-info bg-info">
                    <div class="d-flex justify-content-between align-items-center"><span>Phương thức thanh toán</span><span></span></div>

                    <label class="radio">
                        <input type="radio" name="card" value="payment"> <span><img width="30" src="https://img.icons8.com/color/48/000000/gmail-new.png" /></span>
                    </label>

                    <label class="radio">
                        <input type="radio" name="card" value="payment"> <span><img width="30" src="https://img.icons8.com/officel/48/000000/visa.png" /></span>
                    </label>

                    <form action="/@culture/Order/Index" method="post">
                        <div asp-validation-summary="ModelOnly" class="alert-danger"></div>
                        <div class="form-floating my-1">
                            <input class="form-control" type="text" asp-for="OrderVm.ShipName">
                            <label asp-for="OrderVm.ShipName"></label>
                            <span asp-validation-for="OrderVm.ShipName" class="text-danger"></span>
                        </div>
                        <div class="form-floating my-1">
                            <input class="form-control" type="text" asp-for="OrderVm.ShipAddress">
                            <label asp-for="OrderVm.ShipAddress"></label>
                            <span asp-validation-for="OrderVm.ShipAddress" class="text-danger"></span>
                        </div>

                        <div class="form-floating my-1">
                            <input class="form-control" type="email" asp-for="OrderVm.ShipEmail">
                            <label asp-for="OrderVm.ShipEmail"></label>
                            <span asp-validation-for="OrderVm.ShipEmail" class="text-danger"></span>
                        </div>
                        <div class="form-floating my-1">
                            <input class="form-control" type="text" asp-for="OrderVm.ShipPhoneNumber">
                            <label asp-for="OrderVm.ShipPhoneNumber"></label>
                            <span asp-validation-for="OrderVm.ShipPhoneNumber" class="text-danger"></span>
                        </div>

                        <hr class="line">

                        <div class="d-flex justify-content-between information">
                            <span>Phí ship</span><span>0</span>
                        </div>
                        <div class="d-flex justify-content-between information">
                            <span>Mã ưu đãi</span><span><input class="form-control" type="text" value="" /></span>
                        </div>
                        <div class="d-flex justify-content-between information">
                            @*https://stackoverflow.com/questions/16209509/what-is-tostringn0-format*@
                            <span>Tổng</span><span>@Model.Carts.Sum(a => a.Quantity * a.Price).ToString("N0") VNĐ</span>
                        </div>

                        <button class="btn btn-primary btn-block d-flex justify-content-between mt-3" type="submit">Gửi thông tin mua hàng</button>

                    </form>
                </div>
            </div>
        </div>
    }

</div>